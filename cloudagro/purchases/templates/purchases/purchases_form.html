{% extends 'base.html' %}

{% load static %}

{% block content %}

    <div class="info-container">

        <div id="create-form-box">
            <form action="" method="post">

                {% csrf_token %}
                <h2 id="step-text">1- Datos generales de la compra </h2>
                <hr>
                <div id="create-wrapper">
                    <div id="create-item">
                        <div class="create-element">
                            <h3>Campo</h3>
                            {{ form.campo }}
                        </div>
                        <div class="create-element">
                            <h3>Cliente</h3>
                            {{form.client}} 
                        </div>
                        <div class="create-element">
                            <h3>Animales</h3>
                            {{form.total_animals}}
                        </div>
                        <div class="create-element">
                            <h3>Kg brutos</h3>
                            {{form.brute_kg}}
                        </div>
                        <div class="create-element">
                            <h3>Desbaste</h3>
                            {{form.desbaste}}
                        </div>
                    </div>
                </div>
                
                <div id="create-wrapper">
                    
                </div>

                <hr>
                
                <h2 id="step-text">2- Ingrese animales por su categor√≠a. </h2>
                
                <table class="form-table">
                    {{ animals.management_form }}

                    {% for form in animals.forms %}
                        {% if forloop.first %}
                        <thead >
                            <tr id="form-titles">
                                {% for field in form.visible_fields %}
                                    {% if field.label == "Delete" %}
                                        <th id="form-title-box">- - -</th>
                                    {% else %}
                                        <th id="form-title-box">{{ field.label | capfirst }}</th>
                                    {% endif %}
                                {% endfor %}
                            </tr>
                        </thead>
                        {% endif %}
                        <tr class="{% cycle row1 row2 %} formset_row">
                            {% for field in form.visible_fields %}

                                <td id="form-row-item">
                                    {% if forloop.first %}
                                        {% for hidden in form.hidden_fields %}

                                            {{ hidden }}

                                        {% endfor %}
                                    {% endif %}
                                    {{ field.errors.as_ul }}
                                    {{ field }}
                                </td>

                            {% endfor %}
                        </tr>
                    {% endfor %}        
                </table>
               <p><input type="submit" value="Crear" id="create-btn"/> </p> 
            </form>
        </div>
        
    </div>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="{% static 'js/formset/jquery.formset.js' %}"></script>
    <script type="text/javascript">
    
        $('.formset_row').formset({
                addText: 'Agregar Animales',
                deleteText: 'Quitar',
                prefix: 'animal_set'
            });

    </script>
{% endblock %}